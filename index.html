<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Главная страница</title>
</head>
<body>
  <!-- Навигация -->
  <nav style="display: flex; justify-content: space-between; align-items: center; padding: 10px;">
    <div>
      <a href="index.html">Главная</a> |
      <a href="alliances.html">Союзы</a> |
      <a href="rules.html">Законы</a>
    </div>
    <div>
      <img src="https://cdn-icons-png.flaticon.com/512/1144/1144760.png" alt="Профиль" style="width: 30px; vertical-align: middle;">
      <button id="logoutBtn">Выйти</button>
    </div>
  </nav>

  <h1>Добро пожаловать на главную страницу!</h1>

  <!-- Firebase + Скрипт авторизации -->
  <script type="module">
    // Firebase SDK
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

    // Твоя конфигурация Firebase
    const firebaseConfig = {
      apiKey: "ТВОЙ_API_KEY",
      authDomain: "ТВОЙ_AUTH_DOMAIN",
      projectId: "ТВОЙ_PROJECT_ID",
      storageBucket: "ТВОЙ_STORAGE_BUCKET",
      messagingSenderId: "ТВОЙ_MESSAGING_SENDER_ID",
      appId: "ТВОЙ_APP_ID"
    };

    // Инициализация
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // Проверка авторизации: если не залогинен — уводим на login.html
    onAuthStateChanged(auth, (user) => {
      if (!user) {
        window.location.href = "login.html";
      }
    });

    // Кнопка выхода
    const logoutBtn = document.getElementById("logoutBtn");
    logoutBtn.addEventListener("click", () => {
      signOut(auth).then(() => {
        window.location.href = "login.html";
      }).catch((error) => {
        console.error("Ошибка выхода:", error);
        alert("Не удалось выйти из аккаунта.");
      });
    });
  </script>
</body>
</html>
